series: focal
applications:
  ceilometer:
    charm: ceilometer
    channel: stable
    revision: 489
    num_units: 1
    to:
    - "0"
    options:
      openstack-origin: distro
    constraints: arch=amd64
  ceilometer-agent:
    charm: ceilometer-agent
    channel: stable
    revision: 474
  ceph-mon:
    charm: ceph-mon
    channel: stable
    revision: 73
    series: bionic
    num_units: 3
    to:
    - "1"
    - "2"
    - "3"
    options:
      expected-osd-count: 3
      source: cloud:bionic-stein
    annotations:
      gui-x: "750"
      gui-y: "500"
    constraints: arch=amd64
  ceph-osd:
    charm: ceph-osd
    channel: stable
    revision: 513
    series: bionic
    num_units: 3
    to:
    - "4"
    - "5"
    - "6"
    options:
      bluestore: false
      osd-devices: /srv/osd
      source: cloud:bionic-stein
      use-direct-io: false
    annotations:
      gui-x: "1000"
      gui-y: "500"
    constraints: arch=amd64
    storage:
      bluestore-db: loop,1024M
      bluestore-wal: loop,1024M
      osd-devices: loop,1024M
      osd-journals: loop,1024M
  ceph-radosgw:
    charm: ceph-radosgw
    channel: stable
    revision: 499
    series: bionic
    num_units: 1
    to:
    - "7"
    options:
      source: cloud:bionic-stein
    annotations:
      gui-x: "1000"
      gui-y: "250"
    constraints: arch=amd64
  cinder:
    charm: cinder
    channel: stable
    revision: 530
    resources:
      policyd-override: 0
    num_units: 1
    to:
    - "8"
    options:
      block-device: None
      glance-api-version: 2
      openstack-origin: distro
      worker-multiplier: 0.1
    annotations:
      gui-x: "750"
      gui-y: "0"
    constraints: arch=amd64
    storage:
      block-devices: loop,10240M
  cinder-ceph:
    charm: cinder-ceph
    channel: stable
    revision: 483
    annotations:
      gui-x: "750"
      gui-y: "250"
  cinder-mysql-router:
    charm: mysql-router
    channel: 8.0/stable
    revision: 35
    annotations:
      gui-x: "900"
      gui-y: "1400"
  dashboard-mysql-router:
    charm: mysql-router
    channel: 8.0/stable
    revision: 35
    annotations:
      gui-x: "900"
      gui-y: "1400"
  designate:
    charm: designate
    channel: stable
    revision: 60
    resources:
      policyd-override: 0
    num_units: 1
    to:
    - "9"
    options:
      nameservers: ns1.example.com ns2.example.com
      openstack-origin: distro
    constraints: arch=amd64
  designate-bind:
    charm: designate-bind
    channel: stable
    revision: 43
    num_units: 1
    to:
    - "10"
    constraints: arch=amd64
  glance:
    charm: glance
    channel: stable
    revision: 516
    resources:
      policyd-override: 0
    num_units: 1
    to:
    - "11"
    options:
      openstack-origin: distro
      worker-multiplier: 0.1
    annotations:
      gui-x: "250"
      gui-y: "0"
    constraints: arch=amd64
  glance-mysql-router:
    charm: mysql-router
    channel: 8.0/stable
    revision: 35
    annotations:
      gui-x: "900"
      gui-y: "1400"
  gnocchi:
    charm: gnocchi
    channel: stable
    revision: 51
    resources:
      policyd-override: 0
    num_units: 1
    to:
    - "12"
    options:
      openstack-origin: distro
    annotations:
      gui-x: "1500"
      gui-y: "250"
    constraints: arch=amd64
  heat:
    charm: heat
    channel: stable
    revision: 485
    resources:
      policyd-override: 0
    num_units: 1
    to:
    - "13"
    options:
      openstack-origin: distro
      worker-multiplier: 0.1
    constraints: arch=amd64
  keystone:
    charm: keystone
    channel: stable
    revision: 539
    resources:
      policyd-override: 0
    num_units: 1
    to:
    - "14"
    options:
      openstack-origin: distro
      worker-multiplier: 0.1
    annotations:
      gui-x: "500"
      gui-y: "0"
    constraints: arch=amd64
  keystone-mysql-router:
    charm: mysql-router
    channel: 8.0/stable
    revision: 35
    annotations:
      gui-x: "900"
      gui-y: "1400"
  memcached:
    charm: memcached
    channel: stable
    revision: 38
    num_units: 1
    to:
    - "15"
    annotations:
      gui-x: "1500"
      gui-y: "500"
    constraints: arch=amd64
  mysql-innodb-cluster:
    charm: mysql-innodb-cluster
    channel: 8.0/stable
    revision: 30
    resources:
      mysql-shell: -1
    num_units: 3
    to:
    - "16"
    - "17"
    - "18"
    options:
      innodb-buffer-pool-size: 256M
      max-connections: 1000
      tuning-level: fast
    annotations:
      gui-x: "0"
      gui-y: "250"
    constraints: arch=amd64
  neutron-api:
    charm: neutron-api
    channel: stable
    revision: 501
    resources:
      policyd-override: 0
    num_units: 1
    to:
    - "19"
    options:
      flat-network-providers: physnet1
      manage-neutron-plugin-legacy-mode: true
      neutron-security-groups: true
      openstack-origin: distro
      worker-multiplier: 0.1
    annotations:
      gui-x: "500"
      gui-y: "500"
    constraints: arch=amd64
  neutron-gateway:
    charm: neutron-gateway
    channel: stable
    revision: 488
    num_units: 1
    to:
    - "20"
    options:
      bridge-mappings: physnet1:br-ex
      data-port: br-ex:eth1
      openstack-origin: distro
      worker-multiplier: 0.1
    annotations:
      gui-x: "0"
      gui-y: "0"
    constraints: arch=amd64
  neutron-mysql-router:
    charm: mysql-router
    channel: 8.0/stable
    revision: 35
    annotations:
      gui-x: "900"
      gui-y: "1400"
  neutron-openvswitch:
    charm: neutron-openvswitch
    channel: stable
    revision: 493
    annotations:
      gui-x: "250"
      gui-y: "500"
  nova-cloud-controller:
    charm: nova-cloud-controller
    channel: stable
    revision: 566
    resources:
      policyd-override: 0
    num_units: 1
    to:
    - "21"
    options:
      cpu-allocation-ratio: 64
      network-manager: Neutron
      openstack-origin: distro
      ram-allocation-ratio: 64
      worker-multiplier: 0.1
    annotations:
      gui-x: "0"
      gui-y: "500"
    constraints: arch=amd64
  nova-compute:
    charm: nova-compute
    channel: stable
    revision: 550
    num_units: 1
    to:
    - "22"
    options:
      enable-live-migration: false
      enable-resize: false
      force-raw-images: false
      migration-auth-type: ssh
      openstack-origin: distro
    annotations:
      gui-x: "250"
      gui-y: "250"
    constraints: arch=amd64
    storage:
      ephemeral-device: loop,10240M
  nova-mysql-router:
    charm: mysql-router
    channel: 8.0/stable
    revision: 35
    annotations:
      gui-x: "900"
      gui-y: "1400"
  openstack-dashboard:
    charm: openstack-dashboard
    channel: stable
    revision: 514
    resources:
      policyd-override: 0
      theme: 0
    num_units: 1
    to:
    - "23"
    options:
      openstack-origin: distro
    annotations:
      gui-x: "500"
      gui-y: "-250"
    constraints: arch=amd64
  placement:
    charm: placement
    channel: stable
    revision: 32
    num_units: 1
    to:
    - "24"
    options:
      openstack-origin: distro
      worker-multiplier: 0.1
    annotations:
      gui-x: "400"
      gui-y: "400"
    constraints: arch=amd64
  placement-mysql-router:
    charm: mysql-router
    channel: 8.0/stable
    revision: 35
    annotations:
      gui-x: "900"
      gui-y: "1400"
  rabbitmq-server:
    charm: rabbitmq-server
    channel: stable
    revision: 123
    num_units: 1
    to:
    - "25"
    annotations:
      gui-x: "500"
      gui-y: "250"
    constraints: arch=amd64
machines:
  "0":
    constraints: arch=amd64
  "1":
    constraints: arch=amd64
    series: bionic
  "2":
    constraints: arch=amd64
    series: bionic
  "3":
    constraints: arch=amd64
    series: bionic
  "4":
    constraints: arch=amd64
    series: bionic
  "5":
    constraints: arch=amd64
    series: bionic
  "6":
    constraints: arch=amd64
    series: bionic
  "7":
    constraints: arch=amd64
    series: bionic
  "8":
    constraints: arch=amd64
  "9":
    constraints: arch=amd64
  "10":
    constraints: arch=amd64
  "11":
    constraints: arch=amd64
  "12":
    constraints: arch=amd64
  "13":
    constraints: arch=amd64
  "14":
    constraints: arch=amd64
  "15":
    constraints: arch=amd64
  "16":
    constraints: arch=amd64
  "17":
    constraints: arch=amd64
  "18":
    constraints: arch=amd64
  "19":
    constraints: arch=amd64
  "20":
    constraints: arch=amd64
  "21":
    constraints: arch=amd64
  "22":
    constraints: arch=amd64
  "23":
    constraints: arch=amd64
  "24":
    constraints: arch=amd64
  "25":
    constraints: arch=amd64
relations:
- - nova-compute:amqp
  - rabbitmq-server:amqp
- - nova-cloud-controller:identity-service
  - keystone:identity-service
- - glance:identity-service
  - keystone:identity-service
- - neutron-api:identity-service
  - keystone:identity-service
- - neutron-api:amqp
  - rabbitmq-server:amqp
- - glance:amqp
  - rabbitmq-server:amqp
- - nova-cloud-controller:image-service
  - glance:image-service
- - nova-compute:image-service
  - glance:image-service
- - nova-cloud-controller:cloud-compute
  - nova-compute:cloud-compute
- - nova-cloud-controller:amqp
  - rabbitmq-server:amqp
- - openstack-dashboard:identity-service
  - keystone:identity-service
- - nova-cloud-controller:neutron-api
  - neutron-api:neutron-api
- - cinder:image-service
  - glance:image-service
- - cinder:amqp
  - rabbitmq-server:amqp
- - cinder:identity-service
  - keystone:identity-service
- - cinder:cinder-volume-service
  - nova-cloud-controller:cinder-volume-service
- - cinder-ceph:storage-backend
  - cinder:storage-backend
- - ceph-mon:client
  - nova-compute:ceph
- - nova-compute:ceph-access
  - cinder-ceph:ceph-access
- - ceph-mon:client
  - cinder-ceph:ceph
- - ceph-mon:client
  - glance:ceph
- - ceph-osd:mon
  - ceph-mon:osd
- - ceph-radosgw:mon
  - ceph-mon:radosgw
- - ceph-radosgw:identity-service
  - keystone:identity-service
- - placement:identity-service
  - keystone:identity-service
- - placement:placement
  - nova-cloud-controller:placement
- - keystone:shared-db
  - keystone-mysql-router:shared-db
- - cinder:shared-db
  - cinder-mysql-router:shared-db
- - glance:shared-db
  - glance-mysql-router:shared-db
- - nova-cloud-controller:shared-db
  - nova-mysql-router:shared-db
- - neutron-api:shared-db
  - neutron-mysql-router:shared-db
- - openstack-dashboard:shared-db
  - dashboard-mysql-router:shared-db
- - placement:shared-db
  - placement-mysql-router:shared-db
- - keystone-mysql-router:db-router
  - mysql-innodb-cluster:db-router
- - cinder-mysql-router:db-router
  - mysql-innodb-cluster:db-router
- - nova-mysql-router:db-router
  - mysql-innodb-cluster:db-router
- - glance-mysql-router:db-router
  - mysql-innodb-cluster:db-router
- - neutron-mysql-router:db-router
  - mysql-innodb-cluster:db-router
- - dashboard-mysql-router:db-router
  - mysql-innodb-cluster:db-router
- - placement-mysql-router:db-router
  - mysql-innodb-cluster:db-router
- - neutron-gateway:amqp
  - rabbitmq-server:amqp
- - neutron-gateway:neutron-plugin-api
  - neutron-api:neutron-plugin-api
- - nova-cloud-controller:quantum-network-service
  - neutron-gateway:quantum-network-service
- - heat:shared-db
  - mysql-innodb-cluster:shared-db
- - heat:identity-service
  - keystone:identity-service
- - heat:amqp
  - rabbitmq-server:amqp
- - designate:dns-backend
  - designate-bind:dns-backend
- - designate:identity-service
  - keystone:identity-service
- - designate:shared-db
  - mysql-innodb-cluster:shared-db
- - designate:amqp
  - rabbitmq-server:amqp
- - memcached:cache
  - designate:coordinator-memcached
- - ceilometer:identity-service
  - keystone:identity-service
- - ceilometer:amqp
  - rabbitmq-server:amqp
- - ceilometer-agent:ceilometer-service
  - ceilometer:ceilometer-service
- - ceilometer:identity-notifications
  - keystone:identity-notifications
- - ceilometer-agent:nova-ceilometer
  - nova-compute:nova-ceilometer
- - ceilometer-agent:amqp
  - rabbitmq-server:amqp
- - gnocchi:storage-ceph
  - ceph-mon:client
- - gnocchi:shared-db
  - mysql-innodb-cluster:shared-db
- - gnocchi:amqp
  - rabbitmq-server:amqp
- - gnocchi:coordinator-memcached
  - memcached:cache
- - gnocchi:metric-service
  - ceilometer:metric-service
- - gnocchi:identity-service
  - keystone:identity-service
- - ceilometer:identity-credentials
  - keystone:identity-credentials
- - neutron-openvswitch:neutron-plugin-api
  - neutron-api:neutron-plugin-api
- - nova-compute:neutron-plugin
  - neutron-openvswitch:neutron-plugin
- - neutron-openvswitch:amqp
  - rabbitmq-server:amqp
